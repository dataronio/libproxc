
// different Tx, Rx configs
//
//     Tx --> Rx
// Alt Tx --> Rx
//     Tx --> Alt Rx
// Alt Tx --> Alt Rx ?? must synchronize

void alt_pseudocode()
{
    cases = vector< Case >;
    if ( cases.empty ) {
        wait_forever();
        // unreachable
    }

    foreach c in cases {
        c.enter();
    }

    selected = nullptr;
    ready = vector< Case >; // empty, capacity = ???
    while ( selected == nullptr ) {
        ready.clear();
        foreach c in cases {
            if ( c.ready() ) {
                ready.insert( c );
            }
        }

        if ( ready.empty ) {
            alt.wait();
            // woken up, one or more cases should be ready
            continue;
        }

        shuffle( ready );
        foreach c in ready {
            if ( c.synchronize ) {
                selected = c;
                break;
            }
        }
    }

    foreach c in cases {
        c.leave();
    }

    selected.complete();
}
